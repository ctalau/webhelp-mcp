# WebHelp Search Client

A Node.js client for searching WebHelp documentation indices generated by Oxygen WebHelp.

## Features

- Downloads WebHelp search indices from URLs
- Performs client-side full-text search
- Command-line interface with query parameters
- Supports all WebHelp search features:
  - Boolean search (AND, OR, NOT)
  - Phrase search with quotes
  - Stemming and stop word filtering
  - Multi-language support
  - Result scoring and ranking
- Returns top 10 search results

## Installation

```bash
npm install
```

## Usage

### Basic Usage

```bash
node webhelp-search.js <webhelp-base-url> <search-query>
```

### Examples

```bash
# Search for specific phrase
node webhelp-search.js https://userguide.sync.ro/content-fusion "commit workspace changes"

# Simple word search
node webhelp-search.js https://userguide.sync.ro/content-fusion flowers

# Boolean search with AND operator
node webhelp-search.js https://userguide.sync.ro/content-fusion "git AND merge"

# Boolean search with OR operator
node webhelp-search.js https://userguide.sync.ro/content-fusion "iris OR lilac"

# Search with exclusion
node webhelp-search.js https://userguide.sync.ro/content-fusion "flowers NOT winter"

# Search a local WebHelp output
node webhelp-search.js http://localhost:8080/webhelp "garden preparation"
```

## Output Format

The search client returns the top 10 results in the following format:

```
1. Document Title (Score: 95)
   Path: relative/path/to/document.html
   Description: Brief description of the document content...
   Matched words: search, terms

2. Another Document (Score: 87)
   Path: another/path/document.html
   Description: Another document description...
   Matched words: search, terms
```

## WebHelp Index Structure

The script auto-discovers the search directory and loads the following files:

**Search Engine:**
- `nwSearchFnt.js` - Main search engine library

**Index Files (in `index/` subdirectory):**
- `index.js` - Main index configuration
- `index-1.js`, `index-2.js`, etc. - Word index parts
- `htmlFileInfoList.js` - File metadata
- `stopwords.js` - Stop words list
- `link-to-parent.js` - Document hierarchy
- `keywords.js` - Keyword mappings

**Auto-discovery attempts these paths:**
- `oxygen-webhelp/app/search` (modern WebHelp)
- `oxygen-webhelp/search` (classic WebHelp)
- `webhelp/search`
- `app/search`
- `search`

## Search Features

### Query Types

- **Simple search**: `flowers`
- **Phrase search**: `"spring flowers"`
- **Boolean search**: `garden AND preparation`
- **Exclusion**: `flowers NOT winter`
- **Grouping**: `(iris OR lilac) AND garden`

### Result Information

Each result includes:
- Document title
- Relative file path
- Description excerpt (up to 150 characters)
- Relevance score (0-100)
- Matched words from the search query

## Architecture

The client consists of two main components:

### WebHelpIndexLoader (`webhelp-index-loader.js`)
Handles downloading and processing WebHelp search indices:
- Auto-discovers search directory structure
- Downloads all required index files
- Processes metadata and search data
- Initializes the WebHelp search engine

### WebHelpSearchClient (`webhelp-search.js`)
Provides the main search interface:
- Loads indices using WebHelpIndexLoader
- Performs search queries
- Formats and displays results
- Handles command-line parameters

## Requirements

- Node.js 12.0.0 or higher
- Network access to the WebHelp search index URL

## Error Handling

The client provides clear error messages for common issues:
- Invalid or missing parameters
- Network connectivity problems
- Missing or corrupted search indices
- Search engine initialization failures

## License

MIT